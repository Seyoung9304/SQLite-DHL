SRCS = sqlite3_original.o \
	  execute.o
SRCS1 = sqlite3_lsmvbt.o \
	  execute.o
SRCS2  = sqlite3_double_header.o \
	  execute.o
SRCS3  = sqlite3_double_header_direct.o \
	  execute.o
SRCS4  = sqlite3_double_header_adio.o \
	  execute.o
SRCS5 = sqlite3_nvwal.o \
	  execute.o
SRCS6 = sqlite3-WALDIO.o \
	  execute.o
SRCS7 = sqlite3-WALDIO_nogs.o \
	  execute.o
SRCS8 = sqlite3_FASH.o \
	  execute.o


INSTALL = install

prefix = /usr/local
bindir = $(prefix)/bin

CFLAGS = -lpthread -ldl -lrt

#for sqltie3
CFLAGS += -DNDEBUG=1 \
     -DHAVE_USLEEP=1 \
     -DSQLITE_HAVE_ISNAN \
     -DSQLITE_THREADSAFE=1 \
     -DSQLITE_TEMP_STORE=3 \
     -DSQLITE_POWERSAFE_OVERWRITE=1 \
     -DSQLITE_DEFAULT_FILE_FORMAT=4 \
     -DSQLITE_ENABLE_MEMORY_MANAGEMENT=1 \
     -DSQLITE_ENABLE_FTS3 \
     -DSQLITE_ENABLE_FTS3_BACKWARDS \
     -DSQLITE_ENABLE_FTS4 \
     -DSQLITE_OMIT_BUILTIN_TEST \
     -DSQLITE_OMIT_COMPILEOPTION_DIAGS \
     -DSQLITE_OMIT_LOAD_EXTENSION \
     -DSQLITE_DEFAULT_FILE_PERMISSIONS=0666 \
     -DSQLITE_MAX_WORKER_THREADS=8 \
		 -DUSE_PREAD64 \
     --static
all : original DHL DHL_TC mvbt


#for Nexus5
execute.o : execute.c
	$(CROSS)gcc -O2 -c execute.c 
sqlite3_original.o : sqlite3_original.c
	$(CROSS)gcc -O2 -c sqlite3_original.c $(CFLAGS) -D GETTIME 
original :  execute.o sqlite3_original.o
	$(CROSS)gcc execute.o sqlite3_original.o -o original $(CFLAGS)
sqlite3_mvbt.o : sqlite3_mvbt.c
	$(CROSS)gcc -O2 -c sqlite3_mvbt.c $(CFLAGS) -D GETTIME
mvbt :  execute.o sqlite3_mvbt.o
	$(CROSS)gcc execute.o sqlite3_mvbt.o -o mvbt $(CFLAGS)
sqlite3_DHL.o : sqlite3_DHL.c
	$(CROSS)gcc -D NEXUS -O2 -c sqlite3_DHL.c $(CFLAGS) -D N_EAGER_PAGES=0 -march=armv7-a -D GETTIME
DHL :  execute.o sqlite3_DHL.o
	$(CROSS)gcc execute.o sqlite3_DHL.o -o DHL $(CFLAGS) 
sqlite3_DHL_tc.o : sqlite3_DHL.c
	$(CROSS)gcc -D NEXUS -O2 -o sqlite3_DHL_tc.o -c sqlite3_DHL.c $(CFLAGS) -D N_EAGER_PAGES=0 -march=armv7-a -D GETTIME -DTC
DHL_TC :  execute.o sqlite3_DHL_tc.o
	$(CROSS)gcc execute.o sqlite3_DHL_tc.o -o DHL_TC $(CFLAGS) 
clean :
	rm -f *.o

 
